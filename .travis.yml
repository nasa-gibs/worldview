language: node_js
node_js:
- '8.8.1'
env:
  global:
    - BROWSERSTACK_USER=${BROWSERSTACK_USER}
    - BROWSERSTACK_ACCESS_KEY=${BROWSERSTACK_ACCESS_KEY}
before_install: npm install -g grunt-cli
cache:
  directories:
    - node_modules
    - .python
install:
  - npm install
  - |
    if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then
      then npm start &
    fi


before_script:
  - |
    if [ "${TRAVIS_PULL_REQUEST}"" != "false" ]; then
      npm run build
    else
      npm run build:test
    fi

script:
  - npm run test
  - |
    if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then
      npm run browserstack
    fi
